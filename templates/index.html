<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Recommendation System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="/">Product Recommendation System</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/service-status">Service Status</a>
                <a class="nav-link" href="/dataset-summary">Dataset Info</a>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <h1>Product Recommendation System</h1>
        <p>Choose your search method:</p>
        
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Text Query Interface</h5>
                        <p class="card-text">Search for products using natural language queries.</p>
                        <a href="/text-query" class="btn btn-primary">Text Search</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Image Query Interface</h5>
                        <p class="card-text">Upload images with handwritten queries for OCR processing.</p>
                        <a href="/image-query" class="btn btn-success">Image Query</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Product Image Upload</h5>
                        <p class="card-text">Upload product images for identification using CNN.</p>
                        <a href="/product-image" class="btn btn-warning">Product Image</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-5">
            <h3>System Information</h3>
            <div id="system-info">
                <p>Loading system information...</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadSystemInfo();
        });

        async function loadSystemInfo() {
            try {
                const summaryResponse = await fetch('/dataset-summary');
                const summary = await summaryResponse.json();
                
                if (summary && !summary.error) {
                    document.getElementById('system-info').innerHTML = `
                        <ul>
                            <li>Total Products: ${summary.unique_products || 'N/A'}</li>
                            <li>Total Records: ${summary.total_records || 'N/A'}</li>
                            <li>Countries: ${summary.countries || 'N/A'}</li>
                        </ul>
                    `;
                }
            } catch (error) {
                document.getElementById('system-info').innerHTML = '<p>Error loading system information</p>';
            }
        }
    </script>
</body>
</html>